(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6598:function(e,t,n){Promise.resolve().then(n.bind(n,3322))},3322:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d},dynamic:function(){return u}});var a=n(7437),r=n(2265),s=n(1180),i=n(495),l=n(3102),o=n(879);let u="force-dynamic";function d(){let e=(0,s.e)(),[t,n]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[c,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(null),[h,x]=(0,r.useState)("otp");async function v(n){n.preventDefault(),p(null);let{error:a}=await e.auth.signInWithOtp({email:t});a?p(a.message):p("קוד בן 6 ספרות נשלח אליכם למייל. הזינו אותו להשלמת ההתחברות.")}async function g(n){n.preventDefault(),p(null);let{data:a,error:r}=await e.auth.verifyOtp({email:t,token:c,type:"email"});r?p(r.message):(null==a?void 0:a.user)&&(window.location.href="/dashboard")}async function y(n){n.preventDefault(),p(null);let{data:a,error:r}=await e.auth.signInWithPassword({email:t,password:u});r?p(r.message):(null==a?void 0:a.user)&&(window.location.href="/dashboard")}async function b(n){n.preventDefault(),p(null);let{data:a,error:r}=await e.auth.signUp({email:t,password:u});r?p(r.message):(null==a?void 0:a.user)&&!a.user.email_confirmed_at?p("נשלח מייל לאימות. יש לאשר את הכתובת לפני התחברות."):p("נרשמתם בהצלחה!")}return(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"התחברות"}),(0,a.jsxs)("div",{className:"flex gap-2 text-sm",children:[(0,a.jsx)(i.z,{variant:"otp"===h?"default":"outline",onClick:()=>x("otp"),children:"קוד חד-פעמי"}),(0,a.jsx)(i.z,{variant:"password"===h?"default":"outline",onClick:()=>x("password"),children:"אימייל + סיסמה"})]}),"otp"===h?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"email",children:"אימייל"}),(0,a.jsx)(l.I,{id:"email",type:"email",required:!0,value:t,onChange:e=>n(e.target.value),placeholder:"name@example.com"})]}),(0,a.jsx)(i.z,{type:"submit",children:"שליחת קוד"})]}),(0,a.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"code",children:"קוד בן 6 ספרות"}),(0,a.jsx)(l.I,{id:"code",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,required:!0,value:c,onChange:e=>f(e.target.value),placeholder:"123456"})]}),(0,a.jsx)(i.z,{type:"submit",children:"אימות והמשך"})]})]}):(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"email",children:"אימייל"}),(0,a.jsx)(l.I,{id:"email",type:"email",required:!0,value:t,onChange:e=>n(e.target.value),placeholder:"name@example.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{htmlFor:"password",children:"סיסמה"}),(0,a.jsx)(l.I,{id:"password",type:"password",required:!0,value:u,onChange:e=>d(e.target.value),placeholder:"••••••••"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.z,{type:"submit",children:"התחברות"}),(0,a.jsx)(i.z,{type:"button",variant:"outline",onClick:b,children:"הרשמה"})]})]}),m&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:m}),(0,a.jsxs)("p",{className:"text-sm",children:["אין לכם חשבון? ",(0,a.jsx)("a",{href:"/auth/signup",className:"underline",children:"הרשמה"})]})]})}},495:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var a=n(7437),r=n(2265),s=n(1538),i=n(2218),l=n(7440);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:opacity-90",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:n,variant:r,size:i,asChild:u=!1,...d}=e,c=u?s.g7:"button";return(0,a.jsx)(c,{className:(0,l.cn)(o({variant:r,size:i,className:n})),ref:t,...d})});u.displayName="Button"},3102:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var a=n(7437),r=n(2265),s=n(7440);let i=r.forwardRef((e,t)=>{let{className:n,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});i.displayName="Input"},879:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var a=n(7437),r=n(2265),s=n(5171),i=r.forwardRef((e,t)=>(0,a.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=n(7440);let o=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,a.jsx)(i,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none",n),...r})});o.displayName=i.displayName},1180:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var a=n(4392);let r=()=>(0,a.createClientComponentClient)()},7440:function(e,t,n){"use strict";n.d(t,{cn:function(){return s}});var a=n(4839),r=n(6164);function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,a.W)(t))}},5171:function(e,t,n){"use strict";n.d(t,{WV:function(){return i}});var a=n(2265);n(4887);var r=n(1538),s=n(7437),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=a.forwardRef((e,n)=>{let{asChild:a,...i}=e,l=a?r.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(l,{...i,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{})}},function(e){e.O(0,[392,183,971,23,744],function(){return e(e.s=6598)}),_N_E=e.O()}]);