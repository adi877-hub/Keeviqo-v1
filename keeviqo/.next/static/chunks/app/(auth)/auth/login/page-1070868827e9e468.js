(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6598:function(e,t,n){Promise.resolve().then(n.bind(n,3322))},3322:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d},dynamic:function(){return c}});var r=n(7437),i=n(2265),o=n(1180),a=n(495),s=n(3102),l=n(879),u=n(4509);let c="force-dynamic";function d(){let e=(0,o.e)(),[t,n]=(0,i.useState)(""),[c,d]=(0,i.useState)(""),[f,m]=(0,i.useState)(null),[p,h]=(0,i.useState)("magic"),v="".concat(u._,"/auth/callback");async function g(n){n.preventDefault(),m(null);let{error:r}=await e.auth.signInWithOtp({email:t,options:{emailRedirectTo:v}});r?m(r.message):m("שלחנו לכם קישור התחברות למייל. בדקו את הדואר ולחצו על הקישור.")}async function x(n){n.preventDefault(),m(null);let{data:r,error:i}=await e.auth.signInWithPassword({email:t,password:c});i?m(i.message):(null==r?void 0:r.user)&&(window.location.href="/dashboard")}async function y(n){n.preventDefault(),m(null);let{data:r,error:i}=await e.auth.signUp({email:t,password:c,options:{emailRedirectTo:v}});i?m(i.message):(null==r?void 0:r.user)&&!r.user.email_confirmed_at?m("נשלח מייל לאימות. יש לאשר את הכתובת לפני התחברות."):m("נרשמתם בהצלחה!")}return console.log("[AUTH] SITE_URL =",u._),console.log("[AUTH] redirectTo =",v),(0,r.jsxs)("div",{className:"max-w-md mx-auto space-y-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"התחברות"}),(0,r.jsxs)("div",{className:"flex gap-2 text-sm",children:[(0,r.jsx)(a.z,{variant:"magic"===p?"default":"outline",onClick:()=>h("magic"),children:"קישור במייל"}),(0,r.jsx)(a.z,{variant:"password"===p?"default":"outline",onClick:()=>h("password"),children:"אימייל + סיסמה"})]}),"magic"===p?(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l._,{htmlFor:"email",children:"אימייל"}),(0,r.jsx)(s.I,{id:"email",type:"email",required:!0,value:t,onChange:e=>n(e.target.value),placeholder:"name@example.com"})]}),(0,r.jsx)(a.z,{type:"submit",children:"שליחת קישור"})]}):(0,r.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l._,{htmlFor:"email",children:"אימייל"}),(0,r.jsx)(s.I,{id:"email",type:"email",required:!0,value:t,onChange:e=>n(e.target.value),placeholder:"name@example.com"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l._,{htmlFor:"password",children:"סיסמה"}),(0,r.jsx)(s.I,{id:"password",type:"password",required:!0,value:c,onChange:e=>d(e.target.value),placeholder:"••••••••"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(a.z,{type:"submit",children:"התחברות"}),(0,r.jsx)(a.z,{type:"button",variant:"outline",onClick:y,children:"הרשמה"})]})]}),f&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:f}),(0,r.jsxs)("p",{className:"text-sm",children:["אין לכם חשבון? ",(0,r.jsx)("a",{href:"/auth/signup",className:"underline",children:"הרשמה"})]})]})}},495:function(e,t,n){"use strict";n.d(t,{z:function(){return u}});var r=n(7437),i=n(2265),o=n(1538),a=n(2218),s=n(7440);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:opacity-90",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8"}},defaultVariants:{variant:"default",size:"default"}}),u=i.forwardRef((e,t)=>{let{className:n,variant:i,size:a,asChild:u=!1,...c}=e,d=u?o.g7:"button";return(0,r.jsx)(d,{className:(0,s.cn)(l({variant:i,size:a,className:n})),ref:t,...c})});u.displayName="Button"},3102:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(7437),i=n(2265),o=n(7440);let a=i.forwardRef((e,t)=>{let{className:n,type:i,...a}=e;return(0,r.jsx)("input",{type:i,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...a})});a.displayName="Input"},879:function(e,t,n){"use strict";n.d(t,{_:function(){return l}});var r=n(7437),i=n(2265),o=n(5171),a=i.forwardRef((e,t)=>(0,r.jsx)(o.WV.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null===(n=e.onMouseDown)||void 0===n||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var s=n(7440);let l=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,r.jsx)(a,{ref:t,className:(0,s.cn)("text-sm font-medium leading-none",n),...i})});l.displayName=a.displayName},4509:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var r=n(357);let i=function(){var e;let t=null===(e=r.env.NEXT_PUBLIC_SITE_URL)||void 0===e?void 0:e.trim(),n=t&&t.length>0?t:void 0;return(n=null!=n?n:window.location.origin).endsWith("/")&&(n=n.slice(0,-1)),/localhost(:\d+)?$/i.test(n)&&console.warn("[SITE_URL] Using localhost. Set NEXT_PUBLIC_SITE_URL to your public domain to avoid auth callback issues."),console.log("[SITE_URL] effective =",n),n}()},1180:function(e,t,n){"use strict";n.d(t,{e:function(){return i}});var r=n(4392);let i=()=>(0,r.createClientComponentClient)()},7440:function(e,t,n){"use strict";n.d(t,{cn:function(){return o}});var r=n(4839),i=n(6164);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,r.W)(t))}},357:function(e,t,n){"use strict";var r,i;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(i=n.g.process)?void 0:i.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,r,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l=[],u=!1,c=-1;function d(){u&&r&&(u=!1,r.length?l=r.concat(l):c=-1,l.length&&f())}function f(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(r=l,l=[];++c<t;)r&&r[c].run();c=-1,t=l.length}r=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,r),a=!1}finally{a&&delete n[e]}return o.exports}r.ab="//";var i=r(229);e.exports=i}()},5171:function(e,t,n){"use strict";n.d(t,{WV:function(){return a}});var r=n(2265);n(4887);var i=n(1538),o=n(7437),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=r.forwardRef((e,n)=>{let{asChild:r,...a}=e,s=r?i.g7:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(s,{...a,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{})}},function(e){e.O(0,[392,183,971,23,744],function(){return e(e.s=6598)}),_N_E=e.O()}]);